<main>
 <% if flash[:notice] %>
  <p id="notice" style="color: lightgreen">
   <%= flash[:notice] %>
  </p>
 <% else %>
  <p id="notice"></p>
 <% end %>

 <div class="container px-5 px-sm-0">

 <% if @book.errors.any? %>
  <div>
   <ul style="color: red">
    <h3><%= @book.errors.count %> error prphibited this obj from being saced:</h3>
    <% @book.errors.full_messages.each do |message| %>
    <li><%= message %></li>
    <% end %>
   </ul>
  </div>
 <% end %>

  <div class="row">
   <%= render 'books/user_info',book: @book, user: @user %>
   <div class="col-md-8 offset-md-1">
    <h2>Books</h2>
    <table class="table table-hover table-inverse">
     <thead>
      <tr>
       <th></th>
       <th>Title</th>
       <th>Opinion</th>
       <th colspan="3"></th>
      </tr>
     </thead>
     <tbody>
      <% @books.each do |book| %>
        <tr>
         <td>
          <%= link_to user_path(book.user.id) do %>
           <%= image_tag book.user.profile_image, size: "40*40", class: 'attachment user profile_image fallback' %>
          <% end %>
           </td>
         <td><%= link_to book.title, "/books/#{book.id}" %></td>
         <td><%= book.body %></td>
        </tr>
      <% end %>
     </tbody>
    </table>
   </div>
  </div>
 </div>
</main>
